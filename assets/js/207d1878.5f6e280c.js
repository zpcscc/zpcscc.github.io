"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7518],{3251:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"note/Jest/\u5e38\u7528\u5339\u914d\u5668","title":"\u5e38\u7528\u5339\u914d\u5668","description":"\u4e00\u3001\u57fa\u7840\u5339\u914d\u5668","source":"@site/docs/note/Jest/\u5e38\u7528\u5339\u914d\u5668.md","sourceDirName":"note/Jest","slug":"/note/Jest/\u5e38\u7528\u5339\u914d\u5668","permalink":"/docs/note/Jest/\u5e38\u7528\u5339\u914d\u5668","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u5e38\u7528\u5339\u914d\u5668"},"sidebar":"note","previous":{"title":"\u5e38\u7528except","permalink":"/docs/note/Jest/\u5e38\u7528expect"},"next":{"title":"\u5e38\u7528\u547d\u4ee4","permalink":"/docs/note/Nginx/\u5e38\u7528\u547d\u4ee4"}}');var a=t(6070),o=t(5460);const s={title:"\u5e38\u7528\u5339\u914d\u5668"},l=void 0,i={},c=[{value:"\u4e00\u3001\u57fa\u7840\u5339\u914d\u5668",id:"\u4e00\u57fa\u7840\u5339\u914d\u5668",level:2},{value:".toBe(value)",id:"tobevalue",level:3},{value:".toEqual(value)",id:"toequalvalue",level:3},{value:".toStrictEqual(value)",id:"tostrictequalvalue",level:3},{value:".toContain(item)",id:"tocontainitem",level:3},{value:".toContainEqual(item)",id:"tocontainequalitem",level:3},{value:"\u4e8c\u3001\u7279\u6b8a\u503c\u5339\u914d\u5668",id:"\u4e8c\u7279\u6b8a\u503c\u5339\u914d\u5668",level:2},{value:".toBeNull()",id:"tobenull",level:3},{value:".toBeUndefined()",id:"tobeundefined",level:3},{value:".toBeDefined()",id:"tobedefined",level:3},{value:".toBeNaN()",id:"tobenan",level:3},{value:".toBeTruthy()",id:"tobetruthy",level:3},{value:".toBeFalsy()",id:"tobefalsy",level:3},{value:".not",id:"not",level:3},{value:"\u4e09\u3001\u6570\u5b57\u5339\u914d\u5668",id:"\u4e09\u6570\u5b57\u5339\u914d\u5668",level:2},{value:".toBeGreaterThan(number | bigint)",id:"tobegreaterthannumber--bigint",level:3},{value:".toBeGreaterThanOrEqual(number | bigint)",id:"tobegreaterthanorequalnumber--bigint",level:3},{value:".toBeLessThan()",id:"tobelessthan",level:3},{value:".toBeLessThanOrEqual()",id:"tobelessthanorequal",level:3},{value:".toBeCloseTo(number, numDigits?)",id:"tobeclosetonumber-numdigits",level:3},{value:"\u56db\u3001\u5f02\u6b65\u5339\u914d\u5668",id:"\u56db\u5f02\u6b65\u5339\u914d\u5668",level:2},{value:".resolves",id:"resolves",level:3},{value:".rejects",id:"rejects",level:3},{value:"\u4e94\u3001\u51fd\u6570\u5339\u914d\u5668",id:"\u4e94\u51fd\u6570\u5339\u914d\u5668",level:2},{value:".toHaveBeenCalled()",id:"tohavebeencalled",level:3},{value:".toHaveBeenCalledTimes(number)",id:"tohavebeencalledtimesnumber",level:3},{value:".toHaveBeenCalledWith(arg1, arg2, ...)",id:"tohavebeencalledwitharg1-arg2-",level:3},{value:".toHaveBeenLastCalledWith(arg1, arg2, ...)",id:"tohavebeenlastcalledwitharg1-arg2-",level:3},{value:".toHaveBeenNthCalledWith(nthCall, arg1, arg2, ....)",id:"tohavebeennthcalledwithnthcall-arg1-arg2-",level:3},{value:".toHaveReturned()",id:"tohavereturned",level:3},{value:".toHaveReturnedTimes(number)",id:"tohavereturnedtimesnumber",level:3},{value:".toHaveReturnedWith(value)",id:"tohavereturnedwithvalue",level:3},{value:".toHaveLastReturnedWith(value)",id:"tohavelastreturnedwithvalue",level:3},{value:".toHaveNthReturnedWith(nthCall, value)",id:"tohaventhreturnedwithnthcall-value",level:3},{value:"\u516d\u3001\u5bf9\u8c61\u5339\u914d\u5668",id:"\u516d\u5bf9\u8c61\u5339\u914d\u5668",level:2},{value:".toHaveLength(number)",id:"tohavelengthnumber",level:3},{value:".toHaveProperty(keyPath, value?)",id:"tohavepropertykeypath-value",level:3},{value:".toBeInstanceOf(Class)",id:"tobeinstanceofclass",level:3},{value:".toMatch(regexp | string)",id:"tomatchregexp--string",level:3},{value:".toMatchObject(object)",id:"tomatchobjectobject",level:3},{value:".toMatchSnapshot(propertyMatchers?, hint?)",id:"tomatchsnapshotpropertymatchers-hint",level:3},{value:".toMatchInlineSnapshot(propertyMatchers?, inlineSnapshot)",id:"tomatchinlinesnapshotpropertymatchers-inlinesnapshot",level:3},{value:"\u4e03\u3001\u62a5\u9519\u5339\u914d\u5668",id:"\u4e03\u62a5\u9519\u5339\u914d\u5668",level:2},{value:".toThrow(error?)",id:"tothrowerror",level:3},{value:".toThrowErrorMatchingSnapshot(hint?)",id:"tothrowerrormatchingsnapshothint",level:3},{value:".toThrowErrorMatchingInlineSnaps\xcfhot(inlineSnapshot)",id:"tothrowerrormatchinginlinesnaps\xefhotinlinesnapshot",level:3}];function h(e){const n={code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"\u4e00\u57fa\u7840\u5339\u914d\u5668",children:"\u4e00\u3001\u57fa\u7840\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tobevalue",children:".toBe(value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u6570\u5b57\uff0c\u5b57\u7b26\u7b49\u5b8c\u5168\u76f8\u7b49\uff0c\u4e0d\u80fd\u5339\u914d\u5bf9\u8c61\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const can = {\n  name: 'pamplemousse',\n  ounces: 12,\n};\n\ndescribe('the can', () => {\n  test('has 12 ounces', () => {\n    expect(can.ounces).toBe(12);\n  });\n\n  test('has a sophisticated name', () => {\n    expect(can.name).toBe('pamplemousse');\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"toequalvalue",children:".toEqual(value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u4e24\u8005\u5185\u5bb9\u76f8\u7b49\uff0c\u5bf9\u8c61"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const can1 = {\n  flavor: 'grapefruit',\n  ounces: 12,\n};\nconst can2 = {\n  flavor: 'grapefruit',\n  ounces: 12,\n};\n\ndescribe('the La Croix cans on my desk', () => {\n  test('have all the same properties', () => {\n    expect(can1).toEqual(can2);\n  });\n  test('are not the exact same can', () => {\n    expect(can1).not.toBe(can2);\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tostrictequalvalue",children:".toStrictEqual(value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u5bf9\u8c61\u62e5\u6709\u76f8\u540c\u7684\u7c7b\u578b\u548c\u7ed3\u6784"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"class LaCroix {\n  constructor(flavor) {\n    this.flavor = flavor;\n  }\n}\n\ndescribe('the La Croix cans on my desk', () => {\n  test('are not semantically the same', () => {\n    expect(new LaCroix('lemon')).toEqual({flavor: 'lemon'});\n    expect(new LaCroix('lemon')).not.toStrictEqual({flavor: 'lemon'});\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tocontainitem",children:".toContain(item)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u6570\u7ec4\u6216\u5b57\u7b26\u4e32\u91cc\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5177\u4f53\u9879"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('the flavor list contains lime', () => {\n  expect(getAllFlavors()).toContain('lime');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tocontainequalitem",children:".toContainEqual(item)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u6570\u7ec4\u6216\u5bf9\u8c61\u91cc\uff0c\u662f\u5426\u5305\u542b\u67d0\u4e2a\u5bf9\u8c61"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"describe('my beverage', () => {\n  test('is delicious and not sour', () => {\n    const myBeverage = {delicious: true, sour: false};\n    expect(myBeverages()).toContainEqual(myBeverage);\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e8c\u7279\u6b8a\u503c\u5339\u914d\u5668",children:"\u4e8c\u3001\u7279\u6b8a\u503c\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tobenull",children:".toBeNull()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u4e3aNull"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"function bloop() {\n  return null;\n}\n\ntest('bloop returns null', () => {\n  expect(bloop()).toBeNull();\n});\n\n// \u7b49\u4ef7\u4e8e .toBe(null)\n// \u4f46.toBeNull\u7684\u62a5\u9519\u63d0\u793a\u66f4\u53cb\u597d\uff0c\u63a8\u8350\u4f7f\u7528\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobeundefined",children:".toBeUndefined()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u4e3a \u672a\u5b9a\u4e49\uff0cundefined\uff0c\u6216\u4e00\u4e2a\u51fd\u6570\u662f\u5426\u8fd4\u56deundefined"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('the best drink for octopus flavor is undefined', () => {\n  expect(bestDrinkForFlavor('octopus')).toBeUndefined();\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobedefined",children:".toBeDefined()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u5bf9\u8c61\u662f\u5426\u5b9a\u4e49\u4e86"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('there is a new flavor idea', () => {\n  expect(fetchNewFlavorIdea()).toBeDefined();\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobenan",children:".toBeNaN()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u4e3aNaN"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('passes when value is NaN', () => {\n  expect(NaN).toBeNaN();\n  expect(1).not.toBeNaN();\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobetruthy",children:".toBeTruthy()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u4e3a\u771f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"drinkSomeLaCroix();\nif (thirstInfo()) {\n  drinkMoreLaCroix();\n}\ntest('drinking La Croix leads to having thirst info', () => {\n  drinkSomeLaCroix();\n  expect(thirstInfo()).toBeTruthy();\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobefalsy",children:".toBeFalsy()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u4e3a\u5047"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"drinkSomeLaCroix();\nif (!getErrors()) {\n  drinkMoreLaCroix();\n}\ntest('drinking La Croix does not lead to errors', () => {\n  drinkSomeLaCroix();\n  expect(getErrors()).toBeFalsy();\n});\n\n// \u5728javascript\u4e2d\u6709\u8fd9\u516d\u79cd\u5047\u503c  \u2018false\u2019\u3001\u20180\u2019\u3001\u2018''\u2019\u3001\u2018null\u2019,\u2018undefined\u2019\u3001\u2018NaN\u2019\n// \u5176\u4ed6\u503c\u90fd\u4e3a\u771f\n"})}),"\n",(0,a.jsx)(n.h3,{id:"not",children:".not"}),"\n",(0,a.jsx)(n.p,{children:"\u7528\u4e8e\u5176\u4ed6\u5339\u914d\u5668\u4e4b\u524d\uff0c\u8868\u793a\u76f8\u53cd"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('the best flavor is not coconut', () => {\n  expect(bestLaCroixFlavor()).not.toBe('coconut');\n  expect().toBeTurthy\n\texpect().not.toBeFalsy() \n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e09\u6570\u5b57\u5339\u914d\u5668",children:"\u4e09\u3001\u6570\u5b57\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tobegreaterthannumber--bigint",children:".toBeGreaterThan(number | bigint)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u5927\u4e8e\u67d0\u4e2a\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('ounces per can is more than 10', () => {\n  expect(ouncesPerCan()).toBeGreaterThan(10);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobegreaterthanorequalnumber--bigint",children:".toBeGreaterThanOrEqual(number | bigint)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\u67d0\u4e2a\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('ounces per can is at least 12', () => {\n  expect(ouncesPerCan()).toBeGreaterThanOrEqual(12);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobelessthan",children:".toBeLessThan()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u5c0f\u4e8e\u67d0\u4e2a\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('ounces per can is less than 20', () => {\n  expect(ouncesPerCan()).toBeLessThan(20);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobelessthanorequal",children:".toBeLessThanOrEqual()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u5c0f\u4e8e\u7b49\u4e8e\u67d0\u4e2a\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('ounces per can is at most 12', () => {\n  expect(ouncesPerCan()).toBeLessThanOrEqual(12);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobeclosetonumber-numdigits",children:".toBeCloseTo(number, numDigits?)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u6d6e\u70b9\u6570\u662f\u5426\u9760\u8fd1\u6307\u5b9a\u503c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// \u6d4b\u8bd5\u6d6e\u70b9\u6570\uff0c\u9519\u8bef\u793a\u4f8b\u3002\u4f7f\u7528.toBe\u6ca1\u6cd5\u6b63\u786e\u5339\u914d\u3002\ntest('adding works sanely with decimals', () => {\n  // \u5728javascript\u91cc  0.1 + 0.2 \u5b9e\u9645\u7b49\u4e8e\u20180.30000000000000004\u2019\u8fd9\u662f\u4e8c\u8fdb\u5236\u8ba1\u6570\u5bfc\u81f4\u7684\u8bef\u5dee\u3002\n  expect(0.2 + 0.1).toBe(0.3); // Fails!\n});\n\n// \u6b63\u786e\u793a\u4f8b\ntest('adding works sanely with decimals', () => {\n  // \u7cbe\u786e\u5230\u5c0f\u6570\u70b9\u540e\u4e94\u4f4d\n  expect(0.2 + 0.1).toBeCloseTo(0.3, 5);\n});\n\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u56db\u5f02\u6b65\u5339\u914d\u5668",children:"\u56db\u3001\u5f02\u6b65\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"resolves",children:".resolves"}),"\n",(0,a.jsx)(n.p,{children:"\u7528\u4e8epromise\u627f\u8bfa\u6210\u529f\u540e\uff0c\u83b7\u53d6\u8fd4\u56de\u7684\u6570\u636e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('resolves to lemon', () => {\n  // make sure to add a return statement\n  return expect(Promise.resolve('lemon')).resolves.toBe('lemon');\n});\n\n\n// \u652f\u6301async\u4e0eawait\ntest('resolves to lemon', async () => {\n  await expect(Promise.resolve('lemon')).resolves.toBe('lemon');\n  await expect(Promise.resolve('lemon')).resolves.not.toBe('octopus');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"rejects",children:".rejects"}),"\n",(0,a.jsx)(n.p,{children:"\u7528\u4e8epromise\u627f\u8bfa\u5931\u8d25\u540e\uff0c\u83b7\u53d6\u5f02\u5e38\u60c5\u51b5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('rejects to octopus', () => {\n  // make sure to add a return statement\n  return expect(Promise.reject(new Error('octopus'))).rejects.toThrow(\n    'octopus',\n  );\n});\n\n// \u652f\u6301async\u4e0eawait\ntest('rejects to octopus', async () => {\n  await expect(Promise.reject(new Error('octopus'))).rejects.toThrow('octopus');\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e94\u51fd\u6570\u5339\u914d\u5668",children:"\u4e94\u3001\u51fd\u6570\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tohavebeencalled",children:".toHaveBeenCalled()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\u662f\u5426\u88ab\u8c03\u7528"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"function drinkAll(callback, flavour) {\n  if (flavour !== 'octopus') {\n    callback(flavour);\n  }\n}\n\ndescribe('drinkAll', () => {\n  test('drinks something lemon-flavoured', () => {\n    const drink = jest.fn();\n    drinkAll(drink, 'lemon');\n    expect(drink).toHaveBeenCalled();\n  });\n\n  test('does not drink something octopus-flavoured', () => {\n    const drink = jest.fn();\n    drinkAll(drink, 'octopus');\n    expect(drink).not.toHaveBeenCalled();\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavebeencalledtimesnumber",children:".toHaveBeenCalledTimes(number)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u51fd\u6570\u88ab\u8c03\u7528\u7684\u51c6\u786e\u6b21\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drinkEach drinks each drink', () => {\n  const drink = jest.fn();\n  drinkEach(drink, ['lemon', 'octopus']);\n  expect(drink).toHaveBeenCalledTimes(2);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavebeencalledwitharg1-arg2-",children:".toHaveBeenCalledWith(arg1, arg2, ...)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u51fd\u6570\u8c03\u7528\u7684\u5177\u4f53\u53c2\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('registration applies correctly to orange La Croix', () => {\n  const beverage = new LaCroix('orange');\n  register(beverage);\n  const f = jest.fn();\n  applyToAll(f);\n  expect(f).toHaveBeenCalledWith(beverage);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavebeenlastcalledwitharg1-arg2-",children:".toHaveBeenLastCalledWith(arg1, arg2, ...)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u8c03\u7528\u51fd\u6570\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('applying to all flavors does mango last', () => {\n  const drink = jest.fn();\n  applyToAllFlavors(drink);\n  expect(drink).toHaveBeenLastCalledWith('mango');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavebeennthcalledwithnthcall-arg1-arg2-",children:".toHaveBeenNthCalledWith(nthCall, arg1, arg2, ....)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\uff0c\u7b2c\u51e0\u6b21\u8c03\u7528\u65f6\uff0c\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u67d0\u4e2a\u53c2\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drinkEach drinks each drink', () => {\n  const drink = jest.fn();\n  drinkEach(drink, ['lemon', 'octopus']);\n  expect(drink).toHaveBeenNthCalledWith(1, 'lemon');\n  expect(drink).toHaveBeenNthCalledWith(2, 'octopus');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavereturned",children:".toHaveReturned()"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\u662f\u5426\u6210\u529f\u8fd4\u56de"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drinks returns', () => {\n  const drink = jest.fn(() => true);\n  drink();\n  expect(drink).toHaveReturned();\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavereturnedtimesnumber",children:".toHaveReturnedTimes(number)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\u6210\u529f\u8fd4\u56de\u7684\u6b21\u6570"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drink returns twice', () => {\n  const drink = jest.fn(() => true);\n  drink();\n  drink();\n  expect(drink).toHaveReturnedTimes(2);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavereturnedwithvalue",children:".toHaveReturnedWith(value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\u662f\u5426\u8fd4\u56de\u4e86\u6307\u5b9a\u7684\u503c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drink returns La Croix', () => {\n  const beverage = {name: 'La Croix'};\n  const drink = jest.fn(beverage => beverage.name);\n  drink(beverage);\n  expect(drink).toHaveReturnedWith('La Croix');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavelastreturnedwithvalue",children:".toHaveLastReturnedWith(value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u51fd\u6570\uff0c\u6700\u540e\u4e00\u6b21\u6267\u884c\u8fd4\u56de\u7684\u503c\uff0c\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u503c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drink returns La Croix (Orange) last', () => {\n  const beverage1 = {name: 'La Croix (Lemon)'};\n  const beverage2 = {name: 'La Croix (Orange)'};\n  const drink = jest.fn(beverage => beverage.name);\n  drink(beverage1);\n  drink(beverage2);\n  expect(drink).toHaveLastReturnedWith('La Croix (Orange)');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohaventhreturnedwithnthcall-value",children:".toHaveNthReturnedWith(nthCall, value)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u51fd\u6570\uff0c\u6307\u5b9a\u6b21\u6570\u8fd4\u56de\u7684\u503c\uff0c\u662f\u5426\u4e3a\u6307\u5b9a\u7684\u503c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('drink returns expected nth calls', () => {\n  const beverage1 = {name: 'La Croix (Lemon)'};\n  const beverage2 = {name: 'La Croix (Orange)'};\n  const drink = jest.fn(beverage => beverage.name);\n  drink(beverage1);\n  drink(beverage2);\n  expect(drink).toHaveNthReturnedWith(1, 'La Croix (Lemon)');\n  expect(drink).toHaveNthReturnedWith(2, 'La Croix (Orange)');\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u516d\u5bf9\u8c61\u5339\u914d\u5668",children:"\u516d\u3001\u5bf9\u8c61\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tohavelengthnumber",children:".toHaveLength(number)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u5bf9\u8c61\u662f\u5426\u6709length\u5c5e\u6027\uff0c\u5177\u4f53\u4e3a\u51e0\u3002\u53ef\u7528\u4e8e\u68c0\u67e5\u6570\u7ec4\u548c\u5b57\u7b26\u4e32\u5927\u5c0f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"expect([1, 2, 3]).toHaveLength(3);\nexpect('abc').toHaveLength(3);\nexpect('').not.toHaveLength(5);\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tohavepropertykeypath-value",children:".toHaveProperty(keyPath, value?)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u67d0\u4e2a\u5bf9\u8c61\u91cc\u662f\u5426\u542b\u6709\u67d0\u4e2a\u5b57\u6bb5\u5c5e\u6027\uff0c\u503c\u662f\u5426\u6b63\u786e\u3002\u53ef\u901a\u8fc7\u6570\u7ec4\uff0c\u5b57\u7b26\u4e32\u8def\u5f84\u7684\u65b9\u5f0f\uff0c\u67e5\u770b\u6df1\u5c42\u6570\u636e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// \u5f85\u6d4b\u8bd5\u6837\u4f8b\u6570\u636e\nconst houseForSale = {\n  bath: true,\n  bedrooms: 4,\n  kitchen: {\n    amenities: ['oven', 'stove', 'washer'],\n    area: 20,\n    wallColor: 'white',\n    'nice.oven': true,\n  },\n  'ceiling.height': 2,\n};\n\ntest('this house has my desired features', () => {\n  // \u68c0\u67e5\u662f\u5426\u6709\u2018bath\u2019\u5c5e\u6027\n  expect(houseForSale).toHaveProperty('bath');\n  // \u68c0\u67e5\u662f\u5426\u6709\u2018bedrooms\u2019\u5c5e\u6027\uff0c\u503c\u662f\u5426\u4e3a4\n  expect(houseForSale).toHaveProperty('bedrooms', 4);\n  // \u68c0\u67e5\u662f\u5426\u6ca1\u6709\u2018pool\u2019\u5c5e\u6027\n  expect(houseForSale).not.toHaveProperty('pool');\n\n  // \u4f7f\u7528\u70b9\u8868\u793a\u6cd5\u7684\u6df1\u5ea6\u5f15\u7528---\u7528\u70b9\u63cf\u8ff0\u8def\u5f84\n  // \u68c0\u67e5\u2018kitchen.area\u2019\u8def\u5f84\u5c5e\u6027\u662f\u5426\u5b58\u5728\uff0c\u503c\u662f\u5426\u4e3a20\n  expect(houseForSale).toHaveProperty('kitchen.area', 20);\n  expect(houseForSale).toHaveProperty('kitchen.amenities', [\n    'oven',\n    'stove',\n    'washer',\n  ]);\n  expect(houseForSale).not.toHaveProperty('kitchen.open');\n\n  // \u4f7f\u7528\u5305\u542bkeyPath\u7684\u6570\u7ec4\u8fdb\u884c\u6df1\u5ea6\u5f15\u7528--\u7528\u6570\u7ec4\u63cf\u8ff0\u8def\u5f84\n  // \u68c0\u67e5\u2018kitchen.area\u2019\u8def\u5f84\u7684\u5c5e\u6027\u662f\u5426\u5b58\u5728\uff0c\u503c\u662f\u5426\u4e3a20\n  expect(houseForSale).toHaveProperty(['kitchen', 'area'], 20);\n  expect(houseForSale).toHaveProperty(\n    ['kitchen', 'amenities'],\n    ['oven', 'stove', 'washer'],\n  );\n  expect(houseForSale).toHaveProperty(['kitchen', 'amenities', 0], 'oven');\n  expect(houseForSale).toHaveProperty(['kitchen', 'nice.oven']);\n  expect(houseForSale).not.toHaveProperty(['kitchen', 'open']);\n\n  // \u5f15\u7528\u952e\u672c\u8eab\u5e26\u6709\u70b9\u7684\u952e\n  expect(houseForSale).toHaveProperty(['ceiling.height'], 'tall');\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tobeinstanceofclass",children:".toBeInstanceOf(Class)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u4e00\u4e2a\u5bf9\u8c61\u662f\u5426\u662f\u4e00\u4e2a\u7c7b\u7684\u5b9e\u4f8b"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"class A {}\nexpect(new A()).toBeInstanceOf(A);\nexpect(() => {}).toBeInstanceOf(Function);\nexpect(new A()).toBeInstanceOf(Function); // throws\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tomatchregexp--string",children:".toMatch(regexp | string)"}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u76f8\u5339\u914d"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"describe('an essay on the best flavor', () => {\n  test('mentions grapefruit', () => {\n    expect(essayOnTheBestFlavor()).toMatch(/grapefruit/);\n    expect(essayOnTheBestFlavor()).toMatch(new RegExp('grapefruit'));\n  });\n});\n\ndescribe('grapefruits are healthy', () => {\n  test('grapefruits are a fruit', () => {\n    expect('grapefruits').toMatch('fruit');\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tomatchobjectobject",children:".toMatchObject(object)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u4e00\u4e2a\u5bf9\u8c61\uff0c\u662f\u5426\u662f\u67d0\u4e2a\u5bf9\u8c61\u7684\u5b50\u96c6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"const houseForSale = {\n  bath: true,\n  bedrooms: 4,\n  kitchen: {\n    amenities: ['oven', 'stove', 'washer'],\n    area: 20,\n    wallColor: 'white',\n  },\n};\nconst desiredHouse = {\n  bath: true,\n  kitchen: {\n    amenities: ['oven', 'stove', 'washer'],\n    wallColor: expect.stringMatching(/white|yellow/),\n  },\n};\n\ntest('the house has my desired features', () => {\n  expect(houseForSale).toMatchObject(desiredHouse);\n});\n\n\n\ndescribe('toMatchObject applied to arrays', () => {\n  test('the number of elements must match exactly', () => {\n    expect([{foo: 'bar'}, {baz: 1}]).toMatchObject([{foo: 'bar'}, {baz: 1}]);\n  });\n\n  test('.toMatchObject is called for each elements, so extra object properties are okay', () => {\n    expect([{foo: 'bar'}, {baz: 1, extra: 'quux'}]).toMatchObject([\n      {foo: 'bar'},\n      {baz: 1},\n    ]);\n  });\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tomatchsnapshotpropertymatchers-hint",children:".toMatchSnapshot(propertyMatchers?, hint?)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u5feb\u7167\u4e0e\u6700\u65b0\u7684\u4e00\u4e2a\u503c\u6bd4\u8f83"}),"\n",(0,a.jsx)(n.h3,{id:"tomatchinlinesnapshotpropertymatchers-inlinesnapshot",children:".toMatchInlineSnapshot(propertyMatchers?, inlineSnapshot)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u5feb\u7167\u4e0e\u6700\u8fd1\u7684\u4e00\u4e2a\u503c\u6bd4\u8f83"}),"\n",(0,a.jsx)(n.h2,{id:"\u4e03\u62a5\u9519\u5339\u914d\u5668",children:"\u4e03\u3001\u62a5\u9519\u5339\u914d\u5668"}),"\n",(0,a.jsx)(n.h3,{id:"tothrowerror",children:".toThrow(error?)"}),"\n",(0,a.jsx)(n.p,{children:"\u5339\u914d\u662f\u5426\u6709\u62a5\u9519\u4fe1\u606f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"test('throws on octopus', () => {\n  expect(() => {\n    drinkFlavor('octopus');\n  }).toThrow();\n});\n// \u60a8\u5fc5\u987b\u5c06\u4ee3\u7801\u5305\u88c5\u5728\u51fd\u6570\u4e2d\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u6355\u83b7\u9519\u8bef\uff0c\u65ad\u8a00\u5c06\u5931\u8d25\u3002\n\nfunction drinkFlavor(flavor) {\n  if (flavor == 'octopus') {\n    throw new DisgustingFlavorError('yuck, octopus flavor');\n  }\n  // Do some other stuff\n}\n\ntest('throws on octopus', () => {\n  function drinkOctopus() {\n    drinkFlavor('octopus');\n  }\n  // Test that the error message says \"yuck\" somewhere: these are equivalent\n  expect(drinkOctopus).toThrowError(/yuck/);\n  expect(drinkOctopus).toThrowError('yuck');\n  // Test the exact error message\n  expect(drinkOctopus).toThrowError(/^yuck, octopus flavor$/);\n  expect(drinkOctopus).toThrowError(new Error('yuck, octopus flavor'));\n  // Test that we get a DisgustingFlavorError\n  expect(drinkOctopus).toThrowError(DisgustingFlavorError);\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tothrowerrormatchingsnapshothint",children:".toThrowErrorMatchingSnapshot(hint?)"}),"\n",(0,a.jsx)(n.p,{children:"\u6d4b\u8bd5\u5339\u914d\u51fd\u6570\u5728\u8c03\u7528\u65f6\u629b\u51fa\u5339\u914d\u6700\u8fd1\u5feb\u7167\u7684\u9519\u8bef"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"function drinkFlavor(flavor) {\n  if (flavor == 'octopus') {\n    throw new DisgustingFlavorError('yuck, octopus flavor');\n  }\n  // Do some other stuff\n}\n\ntest('throws on octopus', () => {\n  function drinkOctopus() {\n    drinkFlavor('octopus');\n  }\n  expect(drinkOctopus).toThrowErrorMatchingSnapshot();\n});\n\nexports[`drinking flavors throws on octopus 1`] = `\"yuck, octopus flavor\"`;\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tothrowerrormatchinginlinesnaps\xefhotinlinesnapshot",children:".toThrowErrorMatchingInlineSnaps\xcfhot(inlineSnapshot)"}),"\n",(0,a.jsx)(n.p,{children:"\u6d4b\u8bd5\u51fd\u6570\u5728\u8c03\u7528\u65f6\u629b\u51fa\u5339\u914d\u6700\u8fd1\u5feb\u7167\u7684\u9519\u8bef"})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},5460:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(758);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);